function _AmazonEnum(a){this._init(a)}_AmazonEnum.prototype={values:null,_init:function(a){for(var b=0;b<a.length;b++)this[a[b]]=a[b];this.values=a}};function _AmazonCallbackObserver(a){this._init(a)}
_AmazonCallbackObserver.prototype={CALLBACK_DELAY_MS:2,_handlers:null,_enums:null,_init:function(a){this._handlers={};this._enums=[];for(var a=a||[],b,c=0;c<a.length;c++)b=a[c],this._handlers[b]=null},clearHandlers:function(){var a=null;for(a in this._handlers)this._handlers[a]=null},registerHandlers:function(a){var a=a||{},b,c=null;for(c in this._handlers)(b=a[c])&&(this._handlers[c]=b)},isRegistered:function(){for(var a in this._handlers)if(null!=this._handlers[a])return!0;return!1},runCallback:function(a,
b){if(a&&this._handlers[a]){var c=this;setTimeout(function(){c._handlers[a](b)},this.CALLBACK_DELAY_MS)}}};function _AmazonCache(a){this._init(a)}
_AmazonCache.prototype={_amazonClient:null,_init:function(a){this._amazonClient=a},clearAppCache:function(){this._amazonClient.Cache.clearAppCache()},clearFormData:function(){this._amazonClient.Cache.clearFormData()},clearHistory:function(){this._amazonClient.Cache.clearHistory()},clearAllCookies:function(){this._amazonClient.Cache.clearAllCookies()},clearExpiredCookies:function(){this._amazonClient.Cache.clearExpiredCookies()},clearSessionCookies:function(){this._amazonClient.Cache.clearSessionCookies()}};
function _AmazonInAppPurchasing(a){this._init(a)}
_AmazonInAppPurchasing.prototype={PurchasingObserver:new _AmazonCallbackObserver(["onSdkAvailable","onGetUserIdResponse","onItemDataResponse","onPurchaseResponse","onPurchaseUpdatesResponse"]),ItemType:new _AmazonEnum(["CONSUMABLE","ENTITLEMENT","SUBSCRIPTIONS"]),PurchaseStatus:new _AmazonEnum(["INVALID_INPUT","SUCCESSFUL","FAILED","INVALID_SKU","ALREADY_ENTITLED"]),ItemDataStatus:new _AmazonEnum(["INVALID_INPUT","SUCCESSFUL","FAILED","SUCCESSFUL_WITH_UNAVAILABLE_SKU"]),PurchaseUpdatesStatus:new _AmazonEnum(["INVALID_INPUT",
"SUCCESSFUL","FAILED"]),UserIdStatus:new _AmazonEnum(["SUCCESSFUL","FAILED"]),Offset:{BEGINNING:"BEGINNING"},_amazonClient:null,_init:function(a){this._amazonClient=a},_runCallback:function(a,b){this.PurchasingObserver.runCallback(a,b)},registerObserver:function(a){this.PurchasingObserver.registerHandlers(a);this._amazonClient.IAP.registerObserver()},_pingObserver:function(){this.PurchasingObserver.isRegistered()?this._amazonClient.IAP.ackObserver():console.log("got a callback for in-app-purchasing but observer not registered, queueing")},
_generateJSRequestId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})},getUserId:function(){var a=this._generateJSRequestId();this._amazonClient.IAP.getUserId(a);return a},_validatePurchaseItem:function(a){if("string"==typeof a)return!0;console.log("purchaseItem takes a string sku");return!1},purchaseItem:function(a){var b=this._generateJSRequestId();if(!this._validatePurchaseItem(a))return this._runCallback("purchaseItem",
{jsReqId:b,purchaseRequestStatus:"INVALID_INPUT"}),b;this._amazonClient.IAP.purchaseItem(b,a);return b},_validateGetItemData:function(a){if(a instanceof Array&&0<a.length)return!0;console.log("getItemData takes an array of length > 0");return!1},getItemData:function(a){var b=this._generateJSRequestId();if(!this._validateGetItemData(a))return this._runCallback("onItemDataResponse",{jsReqId:b,itemDataRequestStatus:"INVALID_INPUT"}),b;this._amazonClient.IAP.getItemData(b,a.join(","));return b},_validateGetPurchaseUpdates:function(a){if(a==
this.Offset.BEGINNING||"string"==typeof a)return!0;console.log("getPurchaseUpdates takes a string offset or Offset.BEGINNING");return!1},getPurchaseUpdates:function(a){var b=this._generateJSRequestId();if(!this._validateGetPurchaseUpdates(a))return this._runCallback("onPurchaseUpdatesResponse",{jsReqId:b,purchaseUpdatesRequestStatus:"INVALID_INPUT"}),b;this._amazonClient.IAP.getPurchaseUpdates(b,a);return b}};function _AmazonAds(a){this._init(a)}
_AmazonAds.prototype={AdObserver:new _AmazonCallbackObserver(["onRegisterObserver"]),_amazonClient:null,_initialized:!1,_init:function(a){this._amazonClient=a},_runCallback:function(a,b){this.AdObserver.runCallback(a,b)},_pingObserver:function(){this.AdObserver.isRegistered()?this._amazonClient.Ads.ackObserver():console.log("got a callback for mobile-ads but observer not registered, queueing")},initialize:function(){this._initialized=!0;window.amzn&&(window.amzn.mobileAds&&window.amzn.mobileAds.onRegisterObserver)&&
(this.AdObserver.registerHandlers({onRegisterObserver:window.amzn.mobileAds.onRegisterObserver}),this._amazonClient.Ads.registerObserver())},get initialized(){return this._initialized}};var amznBridge=function(a,b,c){function d(){var a="";JSON&&(a=f+JSON.stringify(e));return a}var e={bridge:a,args:c||[]},f="##AmazonWebAppPlatform/0-";b&&(e.method=b);e.run=function(){var a;window&&(a=window.prompt(d()));return a};return e};function _AmazonJavascriptClient(a,b){this._init(a,b)}
_AmazonJavascriptClient.prototype={_IAP:null,_Cache:null,_Ads:null,_sdkPlatformMode:null,_amazonServices:null,_webAppApiTester:null,_init:function(a,b){this._amazonServices=a;void 0!==b&&(this._webAppApiTester=b);this._determineBindings()},get webAppApiTester(){null==this._webAppApiTester&&this._determineBindings();return this._webAppApiTester},get sdkPlatformMode(){null==this._sdkPlatformMode&&this._determineBindings();return this._sdkPlatformMode},get IAP(){null==this._IAP&&this._determineBindings();
return this._IAP},get Cache(){null==this._Cache&&this._determineBindings();return this._Cache},get Ads(){null==this._Ads&&this._determineBindings();return this._Ads},_checkPlatformEnabled:function(){var a="";return"undefined"!==typeof window&&(a=window.navigator.userAgent,/AmazonWebAppPlatform\/[\d\.]+;0/.test(a))?!0:!1},_determineBindings:function(){if(this._checkPlatformEnabled()){var a;a={};amznBridge("IAP").run()?(a.registerObserver=function(){amznBridge("IAP","registerObserver").run()},a.ackObserver=
function(){amznBridge("IAP","ackObserver").run()},a.getUserId=function(a){amznBridge("IAP","getUserId",[a]).run()},a.purchaseItem=function(a,c){amznBridge("IAP","purchaseItem",[a,c]).run()},a.getItemData=function(a,c){amznBridge("IAP","getItemData",[a,c]).run()},a.getPurchaseUpdates=function(a,c){amznBridge("IAP","getPurchaseUpdates",[a,c]).run()}):a=null;this._IAP=a;a={};amznBridge("Cache").run()?(a.clearAppCache=function(){amznBridge("Cache","clearAppCache").run()},a.clearFormData=function(){amznBridge("Cache",
"clearFormData").run()},a.clearHistory=function(){amznBridge("Cache","clearHistory").run()},a.clearAllCookies=function(){amznBridge("Cache","clearAllCookies").run()},a.clearExpiredCookies=function(){amznBridge("Cache","clearExpiredCookies").run()},a.clearSessionCookies=function(){amznBridge("Cache","clearSessionCookies").run()}):a=null;this._Cache=a;a={};amznBridge("Ads").run()?(s=document.createElement("script"),s.setAttribute("src","https://rialto-web.s3.amazonaws.com/v0/latest/amznMobileAdSDK-js-1.0.x.js"),
document.documentElement.appendChild(s),a.registerObserver=function(){amznBridge("Ads","registerObserver").run()},a.ackObserver=function(){amznBridge("Ads","ackObserver").run()}):a=null;this._Ads=a}else"undefined"!=typeof AmazonWebAppIAP&&(this._IAP=AmazonWebAppIAP),"undefined"!=typeof AmazonWebAppCache&&(this._Cache=AmazonWebAppCache);"undefined"!=typeof AmazonWebAppGameCircle&&this._addGameCircleBindings();null!=this._IAP||null!=this._GameCircle||null!=this._Cache||null!=this._Ads?this._sdkPlatformMode=
this._amazonServices.SdkPlatformMode.ANDROID:(this._sdkPlatformMode=this._amazonServices.SdkPlatformMode.JAVASCRIPT,this._webAppApiTester&&(this._webAppApiTester.initialize(this._amazonServices),this._IAP=this._webAppApiTester.IAP,this._GameCircle=this._webAppApiTester.GameCircle,this._Cache=this._webAppApiTester.Cache))},_addGameCircleBindings:function(){}};function _AmazonServices(){this._init()}
_AmazonServices.prototype={SdkPlatformMode:new _AmazonEnum(["ANDROID","JAVASCRIPT","JAVASCRIPT_LIMITED"]),_amazonClient:null,_IAP:null,_cache:null,_webAppApiTester:null,_ads:null,get IAP(){null==this._IAP&&null!=this._amazonClient.IAP&&(this._IAP=new _AmazonInAppPurchasing(this._amazonClient));return this._IAP},get Cache(){null==this._cache&&null!=this._amazonClient.Cache&&(this._cache=new _AmazonCache(this._amazonClient));return this._cache},get Ads(){null==this._ads&&null!=this._amazonClient.Ads&&
(this._ads=new _AmazonAds(this._amazonClient));return this._ads},get isAppstoreApp(){return this._amazonClient.sdkPlatformMode==this.SdkPlatformMode.ANDROID},_init:function(){this._amazonClient=new _AmazonJavascriptClient(this)},enableApiTester:function(a){this._amazonClient.sdkPlatformMode==this.SdkPlatformMode.JAVASCRIPT?(console.log("enabling the amazon web app api tester"),this._webAppApiTester=a,this._amazonClient=new _AmazonJavascriptClient(this,this._webAppApiTester)):console.log("the amazon web app api tester does not work in android")}};
var amzn_wa=new _AmazonServices,amzn_wa=function(a){function b(a){this.name=d;this.message=a}var c=[],d="WebAppBridgeError";a.addErrorCallback=function(a){c.push(a)};b.prototype=Error();a.throwException=function(a){try{a=JSON.parse(a),a.hasOwnProperty("message")&&(a=a.message)}catch(d){console.log(d)}c.forEach(function(b){b(a)});throw(new b(a)).toString();};return a}(amzn_wa);